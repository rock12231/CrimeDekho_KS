{% extends 'CrimeMapping/base.html' %}
{% load static %}
{% block title %} Crime Analysis {% endblock %}
{% block cssblock %}
{% endblock %}
{% block content %}
<main id="main">
    <!-- ======= Breadcrumbs ======= -->
    <div class="breadcrumbs">
        <div class="page-header d-flex align-items-center" style="background-image: url(' {% static "assets/img/crime_analysis.png" %}') ;">
            <div class="container position-relative">
                <div class="row d-flex justify-content-center">
                    <div class="col-lg-6 text-center">
                        <h2>Crime Analysis</h2>
                        <!-- <p>Crimedekho helps you understand the extent of rising crimes in your region using crimeanalysis. 
                            Report crimes and let people be aware of the crime rates as we map the data to geographical aspects
                            and make it easy for you to understand the dynamics of crime.
                        </p> -->
                        <p>Crime analysis utilizes Generative AI and Statistics to analyze crime data, 
                            providing visual insights for a clearer understanding of criminal activity.
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <nav>
            <div class="container">
                <ol>
                    <li><a href="/">Home</a></li>
                    <li><a href="/">Crime Analytics</a></li>
                    <li>Chart</li>
                </ol>
            </div>
        </nav>
    </div>
    <!-- End Breadcrumbs -->
    <br>
    <ul class="nav nav-tabs pb-0 justify-content-center" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active fw-bold px-5 mx-1" id="home-tab" data-bs-toggle="tab" data-bs-target="#home-tab-pane" type="button"
                role="tab" aria-controls="home-tab-pane" aria-selected="true" onclick="pageScroll()">FIR Chart</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link fw-bold px-5 mx-1" id="profile-tab" data-bs-toggle="tab" data-bs-target="#profile-tab-pane" type="button"
                role="tab" aria-controls="profile-tab-pane" aria-selected="false" onclick="pageScroll()">Mobs Chart</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link fw-bold px-5 mx-1" id="contact-tab" data-bs-toggle="tab" data-bs-target="#contact-tab-pane" type="button"
                role="tab" aria-controls="contact-tab-pane" aria-selected="false" onclick="pageScroll()">Other Chart</button>
        </li>
    </ul>

    <div class="tab-content" id="myTabContent">

        <div class="tab-pane fade show active" id="home-tab-pane" role="tabpanel" aria-labelledby="home-tab" tabindex="0">
            <div class="container">
                <div class="row" id="chartdiv">
                </div>
            </div>
        </div>

        <div class="tab-pane fade d-flex" id="profile-tab-pane" role="tabpanel" aria-labelledby="profile-tab" tabindex="0">
            <div class="col-lg-12 mt-4 justify-content-center">
                {{ image2 | safe }}
            </div>
            <div class="col-lg-12 mt-4 justify-content-center">
                {{ image31| safe }}
            </div>
            <div class="col-lg-12 mt-4 justify-content-center">
                {{ image5 | safe }}
            </div>
            <div class="col-lg-12 mt-4 justify-content-center">
                {{ image2 | safe }}
            </div>
            <div class="col-lg-12 mt-4 justify-content-center">
                {{ image3 | safe }}
            </div>
            <div class="col-lg-12 mt-4 justify-content-center">
                {{ image32 | safe }}
            </div>
            <div class="col-lg-12 mt-4 justify-content-center">
                {{ image4 | safe }}
            </div>
            <div class="col-lg-12 mt-4 justify-content-center">
                {{ image7 | safe }}
            </div>
            <div class="col-lg-12 mt-4 justify-content-center">
                {{ image6 | safe }}
            </div>
                        
        </div>

        <div class="tab-pane fade" id="contact-tab-pane" role="tabpanel" aria-labelledby="contact-tab" tabindex="0">
           <div>Tab3</div>
        </div>

    </div>

</main><!-- End #main -->

<script>
    var ctrdiv = document.getElementById('chartdiv');
    for (let i = 0; i < {{size | safe }}; i++) {
        var canvas = document.createElement('canvas');
        canvas.id = "myChart" + i;
        canvas.width = 400;
        canvas.height = 200;
        var div = document.createElement('div');
        div.className = "col-lg-6 pt-4 pb-2";
        div.setAttribute("data-aos", "zoom-up");
        div.appendChild(canvas);
        ctrdiv.appendChild(div);
    }

</script>

<script>
    let data, config, myChart, labels;

    {% for q in questions %}
        labels = {{q.dataY| safe}};
        data = {
            labels: {{q.dataY| safe}},
            datasets: [{
                data:{{q.dataX | safe}},
                label: '{{q.title | safe}}',
                backgroundColor: [
                    // 20 colors
                    'rgba(255, 99, 132, 0.8)',
                    'rgba(54, 162, 235, 0.8)',
                    'rgba(255, 206, 86, 0.8)',
                    'rgba(75, 192, 192, 0.8)',
                    'rgba(153, 102, 255, 0.8)',
                    'rgba(255, 159, 64, 0.8)',
                    'rgba(255, 99, 132, 0.8)',
                    'rgba(54, 162, 235, 0.8)',
                    'rgba(255, 206, 86, 0.8)',
                    'rgba(75, 192, 192, 0.8)',
                    'rgba(153, 102, 255, 0.8)',
                    'rgba(255, 159, 64, 0.8)',
                    'rgba(255, 99, 132, 0.8)',
                    'rgba(54, 162, 235, 0.8)',
                    'rgba(255, 206, 86, 0.8)',
                    'rgba(75, 192, 192, 0.8)',
                    'rgba(153, 102, 255, 0.8)',
                    'rgba(255, 159, 64, 0.8)',
                    'rgba(255, 99, 132, 0.8)',
                    'rgba(54, 162, 235, 0.8)',
                    'rgba(255, 206, 86, 0.8)',

                ],
                borderWidth: 1
            },
        ]
    };

    config = {
        type: '{{q.chartType | safe}}',
        data: data,
        options: {
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    };

    myChart = new Chart(
        document.getElementById("myChart{{ forloop.counter0 }}"),
        config
    );

{% endfor %}
</script>

{% endblock content %}
{% block jsblock %} {% endblock %}